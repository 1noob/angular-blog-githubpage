{"ast":null,"code":"import _asyncToGenerator from \"/Users/mac/WebstormProjects/github-page/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { ElementRef, Renderer2 } from '@angular/core';\nimport { BlogService } from \"../service/blog.service\";\nimport { ActivatedRoute } from \"@angular/router\";\nimport { DomSanitizer } from \"@angular/platform-browser\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/platform-browser\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../service/blog.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"ng-zorro-antd/skeleton\";\nconst _c0 = [\"divContent\"];\n\nconst _c1 = function () {\n  return {\n    rows: 20\n  };\n};\n\nfunction ArticleComponent_nz_skeleton_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"nz-skeleton\", 3);\n    i0.ɵɵlistener(\"ended\", function ArticleComponent_nz_skeleton_0_Template_nz_skeleton_ended_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.getDomTest();\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"nzActive\", true)(\"nzParagraph\", i0.ɵɵpureFunction0(2, _c1));\n  }\n}\n\nfunction ArticleComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"innerHTML\", ctx_r2.article, i0.ɵɵsanitizeHtml);\n  }\n}\n\nconst cache = {};\nexport class ArticleComponent {\n  constructor(sanitizer, route, blogService, el, renderer) {\n    this.sanitizer = sanitizer;\n    this.route = route;\n    this.blogService = blogService;\n    this.el = el;\n    this.renderer = renderer;\n  }\n\n  ngOnInit() {\n    const {\n      owner,\n      repo\n    } = this.blogService.getDefaultOwnerAndRepo();\n    this.route.params.subscribe(result => {\n      this.blogService.getBlog$(owner, repo, result.articleName).subscribe(data => {\n        if (!data) this.article = data;else {\n          let html = new DOMParser().parseFromString(data.toString(), 'text/html'); // console.log(html.getElementById('write'));\n\n          if (screen.width < 500) {\n            this.renderer.setStyle(html.getElementById('write'), 'padding', '0.7rem');\n            this.renderer.setStyle(html.getElementById('write'), 'padding-top', '0');\n            this.renderer.setStyle(html.getElementById('write'), 'font-size', '0.7rem');\n          }\n\n          const html_el = html.documentElement;\n          this.article = this.sanitizer.bypassSecurityTrustHtml(html_el.innerHTML);\n        } // if(screen.width<500){\n        //   this.renderer.setStyle(html.getElementById('write'), 'font-size', '0.7rem');\n        // }\n        // set style\n        // if(screen.width<500){\n        //   this.renderer.setStyle(this.greetDiv.nativeElement, 'font-size', '0.7rem');\n        // }\n      });\n    });\n  }\n\n  getDomTest() {// this.renderer.setStyle(document.getElementById('write'), 'padding', '0.7rem');\n    // this.renderer.setStyle(this.greetDiv.nativeElement.querySelector('p'), 'padding-left', '0.7rem');\n    // console.log(document.getElementById('write'));\n  }\n\n  ngAfterViewInit() {}\n\n  delay(ms) {\n    return _asyncToGenerator(function* () {\n      return new Promise(resolve => setTimeout(resolve, ms));\n    })();\n  }\n\n  sleep(ms) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.delay(ms);\n    })();\n  }\n\n}\n\nArticleComponent.ɵfac = function ArticleComponent_Factory(t) {\n  return new (t || ArticleComponent)(i0.ɵɵdirectiveInject(i1.DomSanitizer), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.BlogService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.Renderer2));\n};\n\nArticleComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ArticleComponent,\n  selectors: [[\"app-article\"]],\n  viewQuery: function ArticleComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.greetDiv = _t.first);\n    }\n  },\n  decls: 4,\n  vars: 2,\n  consts: [[\"class\", \"item\", 3, \"nzActive\", \"nzParagraph\", \"ended\", 4, \"ngIf\"], [\"divContent\", \"\"], [\"class\", \"article\", 3, \"innerHTML\", 4, \"ngIf\"], [1, \"item\", 3, \"nzActive\", \"nzParagraph\", \"ended\"], [1, \"article\", 3, \"innerHTML\"]],\n  template: function ArticleComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ArticleComponent_nz_skeleton_0_Template, 1, 3, \"nz-skeleton\", 0);\n      i0.ɵɵelementStart(1, \"div\", null, 1);\n      i0.ɵɵtemplate(3, ArticleComponent_div_3_Template, 1, 1, \"div\", 2);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", !ctx.article);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.article);\n    }\n  },\n  directives: [i4.NgIf, i5.NzSkeletonComponent],\n  styles: [\".item[_ngcontent-%COMP%]{\\n  padding: 1rem 1rem;\\n  width: 100%;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFydGljbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0FBQ2IiLCJmaWxlIjoiYXJ0aWNsZS5jb21wb25lbnQuY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLml0ZW17XG4gIHBhZGRpbmc6IDFyZW0gMXJlbTtcbiAgd2lkdGg6IDEwMCU7XG59XG5cbiJdfQ== */\"]\n});","map":{"version":3,"sources":["/Users/mac/WebstormProjects/github-page/src/app/article/article.component.ts","/Users/mac/WebstormProjects/github-page/src/app/article/article.component.html"],"names":[],"mappings":"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","sourcesContent":["import {Component, OnInit, ElementRef, Renderer2, ViewChild} from '@angular/core';\nimport {BlogService} from \"../service/blog.service\";\nimport {ActivatedRoute, ParamMap} from \"@angular/router\";\nimport {switchMap} from \"rxjs/operators\";\nimport {DomSanitizer, SafeResourceUrl} from \"@angular/platform-browser\";\nimport {NONE_TYPE} from \"@angular/compiler\";\nimport {async, range} from \"rxjs\";\n\n\n\nconst cache = {};\n\n@Component({\n  selector: 'app-article',\n  templateUrl: './article.component.html',\n  styleUrls: ['./article.component.css']\n})\nexport class ArticleComponent implements OnInit {\n\n  article: any;\n  markUrl: SafeResourceUrl;\n\n  @ViewChild('divContent') greetDiv: ElementRef;\n\n  constructor(\n    private sanitizer:DomSanitizer,\n    private route: ActivatedRoute,\n    private blogService: BlogService,\n    private el: ElementRef,\n    private renderer:Renderer2\n  ) {}\n\n\n  ngOnInit(): void {\n    const {owner, repo} = this.blogService.getDefaultOwnerAndRepo();\n    this.route.params.subscribe(\n      (result: any) => {\n        this.blogService.getBlog$(owner, repo, result.articleName)\n          .subscribe(\n            (data:any) => {\n              if(!data)\n                this.article = data;\n              else{\n\n                let html = (new DOMParser).parseFromString(data.toString(), 'text/html');\n                // console.log(html.getElementById('write'));\n                if (screen.width<500){\n                  this.renderer.setStyle(html.getElementById('write'),'padding','0.7rem');\n                  this.renderer.setStyle(html.getElementById('write'),'padding-top','0');\n                  this.renderer.setStyle(html.getElementById('write'),'font-size','0.7rem');\n                }\n                const html_el = html.documentElement as HTMLElement;\n                this.article = this.sanitizer.bypassSecurityTrustHtml(html_el.innerHTML);\n\n              }\n\n\n\n              // if(screen.width<500){\n              //   this.renderer.setStyle(html.getElementById('write'), 'font-size', '0.7rem');\n              // }\n\n\n\n\n\n              // set style\n              // if(screen.width<500){\n              //   this.renderer.setStyle(this.greetDiv.nativeElement, 'font-size', '0.7rem');\n              // }\n            }\n          );\n      }\n    );\n  }\n\n  getDomTest() {\n    // this.renderer.setStyle(document.getElementById('write'), 'padding', '0.7rem');\n    // this.renderer.setStyle(this.greetDiv.nativeElement.querySelector('p'), 'padding-left', '0.7rem');\n    // console.log(document.getElementById('write'));\n  }\n\n  ngAfterViewInit():void{\n\n  }\n\n  async delay(ms: number) {\n    return new Promise( resolve => setTimeout(resolve, ms) );\n  }\n\n  async sleep(ms: number){\n    await this.delay(ms);\n  }\n}\n","<nz-skeleton class=\"item\" *ngIf='!article' [nzActive]=\"true\" [nzParagraph]=\"{ rows: 20}\" (ended)=\"getDomTest()\" ></nz-skeleton>\n<div #divContent>\n  <div class=\"article\" *ngIf=\"article\" [innerHTML]=\"article\"></div>\n</div>\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}