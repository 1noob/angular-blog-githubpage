{"ast":null,"code":"import { TemplateRef } from '@angular/core';\nimport { coerceBooleanProperty, _isNumberValue, coerceCssPixelValue } from '@angular/cdk/coercion';\nimport { warn } from 'ng-zorro-antd/core/logger';\nimport { Subject, isObservable, from, of } from 'rxjs';\nimport { take } from 'rxjs/operators';\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\nfunction toArray(value) {\n  var ret;\n\n  if (value == null) {\n    ret = [];\n  } else if (!Array.isArray(value)) {\n    ret = [value];\n  } else {\n    ret = value;\n  }\n\n  return ret;\n}\n\nfunction arraysEqual(array1, array2) {\n  if (!array1 || !array2 || array1.length !== array2.length) {\n    return false;\n  }\n\n  var len = array1.length;\n\n  for (var i = 0; i < len; i++) {\n    if (array1[i] !== array2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction shallowCopyArray(source) {\n  return source.slice();\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction isNotNil(value) {\n  return typeof value !== 'undefined' && value !== null;\n}\n\nfunction isNil(value) {\n  return typeof value === 'undefined' || value === null;\n}\n/**\n * Examine if two objects are shallowly equaled.\n */\n\n\nfunction shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB); // tslint:disable-next-line:prefer-for-of\n\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    if (objA[key] !== objB[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction isNonEmptyString(value) {\n  return typeof value === 'string' && value !== '';\n}\n\nfunction isTemplateRef(value) {\n  return value instanceof TemplateRef;\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction toBoolean(value) {\n  return coerceBooleanProperty(value);\n}\n\nfunction toNumber(value) {\n  var fallbackValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return _isNumberValue(value) ? Number(value) : fallbackValue;\n}\n\nfunction toCssPixel(value) {\n  return coerceCssPixelValue(value);\n} // tslint:disable no-invalid-this\n\n/**\n * Get the function-property type's value\n */\n\n\nfunction valueFunctionProp(prop) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  return typeof prop === 'function' ? prop.apply(void 0, args) : prop;\n}\n\nfunction propDecoratorFactory(name, fallback) {\n  function propDecorator(target, propName, originalDescriptor) {\n    var privatePropName = \"$$__\".concat(propName);\n\n    if (Object.prototype.hasOwnProperty.call(target, privatePropName)) {\n      warn(\"The prop \\\"\".concat(privatePropName, \"\\\" is already exist, it will be overrided by \").concat(name, \" decorator.\"));\n    }\n\n    Object.defineProperty(target, privatePropName, {\n      configurable: true,\n      writable: true\n    });\n    return {\n      get: function get() {\n        return originalDescriptor && originalDescriptor.get ? originalDescriptor.get.bind(this)() : this[privatePropName];\n      },\n      set: function set(value) {\n        if (originalDescriptor && originalDescriptor.set) {\n          originalDescriptor.set.bind(this)(fallback(value));\n        }\n\n        this[privatePropName] = fallback(value);\n      }\n    };\n  }\n\n  return propDecorator;\n}\n/**\n * Input decorator that handle a prop to do get/set automatically with toBoolean\n *\n * Why not using @InputBoolean alone without @Input? AOT needs @Input to be visible\n *\n * @howToUse\n * ```\n * @Input() @InputBoolean() visible: boolean = false;\n *\n * // Act as below:\n * // @Input()\n * // get visible() { return this.__visible; }\n * // set visible(value) { this.__visible = value; }\n * // __visible = false;\n * ```\n */\n\n\nfunction InputBoolean() {\n  return propDecoratorFactory('InputBoolean', toBoolean);\n}\n\nfunction InputCssPixel() {\n  return propDecoratorFactory('InputCssPixel', toCssPixel);\n}\n\nfunction InputNumber(fallbackValue) {\n  return propDecoratorFactory('InputNumber', function (value) {\n    return toNumber(value, fallbackValue);\n  });\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Silent an event by stopping and preventing it.\n */\n\n\nfunction silentEvent(e) {\n  e.stopPropagation();\n  e.preventDefault();\n}\n\nfunction getElementOffset(elem) {\n  if (!elem.getClientRects().length) {\n    return {\n      top: 0,\n      left: 0\n    };\n  }\n\n  var rect = elem.getBoundingClientRect();\n  var win = elem.ownerDocument.defaultView;\n  return {\n    top: rect.top + win.pageYOffset,\n    left: rect.left + win.pageXOffset\n  };\n}\n/**\n * Investigate if an event is a `TouchEvent`.\n */\n\n\nfunction isTouchEvent(event) {\n  return event.type.startsWith('touch');\n}\n\nfunction getEventPosition(event) {\n  return isTouchEvent(event) ? event.touches[0] || event.changedTouches[0] : event;\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction getRegExp(prefix) {\n  var prefixArray = Array.isArray(prefix) ? prefix : [prefix];\n  var prefixToken = prefixArray.join('').replace(/(\\$|\\^)/g, '\\\\$1');\n\n  if (prefixArray.length > 1) {\n    prefixToken = \"[\".concat(prefixToken, \"]\");\n  }\n\n  return new RegExp(\"(\\\\s|^)(\".concat(prefixToken, \")[^\\\\s]*\"), 'g');\n}\n\nfunction getMentions(value) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '@';\n\n  if (typeof value !== 'string') {\n    return [];\n  }\n\n  var regex = getRegExp(prefix);\n  var mentions = value.match(regex);\n  return mentions !== null ? mentions.map(function (e) {\n    return e.trim();\n  }) : [];\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Much like lodash.\n */\n\n\nfunction padStart(toPad, length, element) {\n  if (toPad.length > length) {\n    return toPad;\n  }\n\n  var joined = \"\".concat(getRepeatedElement(length, element)).concat(toPad);\n  return joined.slice(joined.length - length, joined.length);\n}\n\nfunction padEnd(toPad, length, element) {\n  var joined = \"\".concat(toPad).concat(getRepeatedElement(length, element));\n  return joined.slice(0, length);\n}\n\nfunction getRepeatedElement(length, element) {\n  return Array(length).fill(element).join('');\n}\n\nfunction isPromise(obj) {\n  return !!obj && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\n\nfunction getPercent(min, max, value) {\n  return (value - min) / (max - min) * 100;\n}\n\nfunction getPrecision(num) {\n  var numStr = num.toString();\n  var dotIndex = numStr.indexOf('.');\n  return dotIndex >= 0 ? numStr.length - dotIndex - 1 : 0;\n}\n\nfunction ensureNumberInRange(num, min, max) {\n  if (isNaN(num) || num < min) {\n    return min;\n  } else if (num > max) {\n    return max;\n  } else {\n    return num;\n  }\n}\n\nfunction isNumberFinite(value) {\n  return typeof value === 'number' && isFinite(value);\n}\n\nfunction toDecimal(value, decimal) {\n  return Math.round(value * Math.pow(10, decimal)) / Math.pow(10, decimal);\n}\n\nfunction sum(input) {\n  var initial = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  return input.reduce(function (previous, current) {\n    return previous + current;\n  }, initial);\n}\n\nfunction scrollIntoView(node) {\n  var nodeAsAny = node;\n\n  if (nodeAsAny.scrollIntoViewIfNeeded) {\n    /* tslint:disable-next-line:no-string-literal */\n    nodeAsAny.scrollIntoViewIfNeeded(false);\n    return;\n  }\n\n  if (node.scrollIntoView) {\n    node.scrollIntoView(false);\n    return;\n  }\n} // from https://github.com/component/textarea-caret-position\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\n\n\nvar properties = ['direction', 'boxSizing', 'width', 'height', 'overflowX', 'overflowY', 'borderTopWidth', 'borderRightWidth', 'borderBottomWidth', 'borderLeftWidth', 'borderStyle', 'paddingTop', 'paddingRight', 'paddingBottom', 'paddingLeft', // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n'fontStyle', 'fontVariant', 'fontWeight', 'fontStretch', 'fontSize', 'fontSizeAdjust', 'lineHeight', 'fontFamily', 'textAlign', 'textTransform', 'textIndent', 'textDecoration', 'letterSpacing', 'wordSpacing', 'tabSize', 'MozTabSize'];\nvar isBrowser = typeof window !== 'undefined';\nvar isFirefox = isBrowser && window.mozInnerScreenX != null;\n\nvar _parseInt = function _parseInt(str) {\n  return parseInt(str, 10);\n};\n\nvar ɵ0 = _parseInt;\n\nfunction getCaretCoordinates(element, position, options) {\n  if (!isBrowser) {\n    throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n  }\n\n  var debug = options && options.debug || false;\n\n  if (debug) {\n    var el = document.querySelector('#input-textarea-caret-position-mirror-div');\n\n    if (el) {\n      el.parentNode.removeChild(el);\n    }\n  } // The mirror div will replicate the textarea's style\n\n\n  var div = document.createElement('div');\n  div.id = 'input-textarea-caret-position-mirror-div';\n  document.body.appendChild(div);\n  var style = div.style;\n  var computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle; // currentStyle for IE < 9\n\n  var isInput = element.nodeName === 'INPUT'; // Default textarea styles\n\n  style.whiteSpace = 'pre-wrap';\n\n  if (!isInput) {\n    style.wordWrap = 'break-word'; // only for textarea-s\n  } // Position off-screen\n\n\n  style.position = 'absolute'; // required to return coordinates properly\n\n  if (!debug) {\n    style.visibility = 'hidden';\n  } // not 'display: none' because we want rendering\n  // Transfer the element's properties to the div\n\n\n  properties.forEach(function (prop) {\n    if (isInput && prop === 'lineHeight') {\n      // Special case for <input>s because text is rendered centered and line height may be != height\n      style.lineHeight = computed.height;\n    } else {\n      // @ts-ignore\n      style[prop] = computed[prop];\n    }\n  });\n\n  if (isFirefox) {\n    // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n    if (element.scrollHeight > _parseInt(computed.height)) {\n      style.overflowY = 'scroll';\n    }\n  } else {\n    style.overflow = 'hidden'; // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n  }\n\n  div.textContent = element.value.substring(0, position); // The second special handling for input type=\"text\" vs textarea:\n  // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n\n  if (isInput) {\n    div.textContent = div.textContent.replace(/\\s/g, \"\\xA0\");\n  }\n\n  var span = document.createElement('span'); // Wrapping must be replicated *exactly*, including when a long word gets\n  // onto the next line, with whitespace at the end of the line before (#7).\n  // The  *only* reliable way to do that is to copy the *entire* rest of the\n  // textarea's content into the <span> created at the caret position.\n  // For inputs, just '.' would be enough, but no need to bother.\n\n  span.textContent = element.value.substring(position) || '.'; // || because a completely empty faux span doesn't render at all\n\n  div.appendChild(span);\n  var coordinates = {\n    top: span.offsetTop + _parseInt(computed.borderTopWidth),\n    left: span.offsetLeft + _parseInt(computed.borderLeftWidth),\n    height: _parseInt(computed.lineHeight)\n  };\n\n  if (debug) {\n    span.style.backgroundColor = '#eee';\n    createDebugEle(element, coordinates);\n  } else {\n    document.body.removeChild(div);\n  }\n\n  return coordinates;\n}\n\nfunction createDebugEle(element, coordinates) {\n  var fontSize = getComputedStyle(element).getPropertyValue('font-size');\n  var rect = document.querySelector('#DEBUG') || document.createElement('div');\n  document.body.appendChild(rect);\n  rect.id = 'DEBUG';\n  rect.style.position = 'absolute';\n  rect.style.backgroundColor = 'red';\n  rect.style.height = fontSize;\n  rect.style.width = '1px';\n  rect.style.top = \"\".concat(element.getBoundingClientRect().top - element.scrollTop + window.pageYOffset + coordinates.top, \"px\");\n  rect.style.left = \"\".concat(element.getBoundingClientRect().left - element.scrollLeft + window.pageXOffset + coordinates.left, \"px\");\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction isStyleSupport(styleName) {\n  if (typeof window !== 'undefined' && window.document && window.document.documentElement) {\n    var styleNameList = Array.isArray(styleName) ? styleName : [styleName];\n    var documentElement = window.document.documentElement;\n    return styleNameList.some(function (name) {\n      return name in documentElement.style;\n    });\n  }\n\n  return false;\n}\n\nfunction getStyleAsText(styles) {\n  if (!styles) {\n    return '';\n  }\n\n  return Object.keys(styles).map(function (key) {\n    var val = styles[key];\n    return \"\".concat(key, \":\").concat(typeof val === 'string' ? val : val + 'px');\n  }).join(';');\n} // We only handle element & text node.\n\n\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\nvar ellipsisContainer;\nvar wrapperStyle = {\n  padding: '0',\n  margin: '0',\n  display: 'inline',\n  lineHeight: 'inherit'\n};\n\nfunction pxToNumber(value) {\n  if (!value) {\n    return 0;\n  }\n\n  var match = value.match(/^\\d*(\\.\\d*)?/);\n  return match ? Number(match[0]) : 0;\n}\n\nfunction styleToString(style) {\n  // There are some different behavior between Firefox & Chrome.\n  // We have to handle this ourself.\n  var styleNames = Array.prototype.slice.apply(style);\n  return styleNames.map(function (name) {\n    return \"\".concat(name, \": \").concat(style.getPropertyValue(name), \";\");\n  }).join('');\n}\n\nfunction mergeChildren(children) {\n  var childList = [];\n  children.forEach(function (child) {\n    var prevChild = childList[childList.length - 1];\n\n    if (prevChild && child.nodeType === TEXT_NODE && prevChild.nodeType === TEXT_NODE) {\n      prevChild.data += child.data;\n    } else {\n      childList.push(child);\n    }\n  });\n  return childList;\n}\n\nfunction measure(originEle, rows, contentNodes, fixedContent, ellipsisStr) {\n  var suffixStr = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : '';\n\n  if (!ellipsisContainer) {\n    ellipsisContainer = document.createElement('div');\n    ellipsisContainer.setAttribute('aria-hidden', 'true');\n    document.body.appendChild(ellipsisContainer);\n  } // Get origin style\n\n\n  var originStyle = window.getComputedStyle(originEle);\n  var originCSS = styleToString(originStyle);\n  var lineHeight = pxToNumber(originStyle.lineHeight);\n  var maxHeight = Math.round(lineHeight * (rows + 1) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom)); // Set shadow\n\n  ellipsisContainer.setAttribute('style', originCSS);\n  ellipsisContainer.style.position = 'fixed';\n  ellipsisContainer.style.left = '0';\n  ellipsisContainer.style.height = 'auto';\n  ellipsisContainer.style.minHeight = 'auto';\n  ellipsisContainer.style.maxHeight = 'auto';\n  ellipsisContainer.style.top = '-999999px';\n  ellipsisContainer.style.zIndex = '-1000'; // clean up css overflow\n\n  ellipsisContainer.style.textOverflow = 'clip';\n  ellipsisContainer.style.whiteSpace = 'normal';\n  ellipsisContainer.style.webkitLineClamp = 'none';\n  var contentList = mergeChildren(contentNodes);\n  var container = document.createElement('div');\n  var contentContainer = document.createElement('span');\n  var suffixContainer = document.createTextNode(suffixStr);\n  var fixedContainer = document.createElement('span'); // Add styles in container\n\n  Object.assign(container.style, wrapperStyle);\n  Object.assign(contentContainer.style, wrapperStyle);\n  Object.assign(fixedContainer.style, wrapperStyle);\n  contentList.forEach(function (n) {\n    contentContainer.appendChild(n);\n  });\n  contentContainer.appendChild(suffixContainer);\n  fixedContent.forEach(function (node) {\n    fixedContainer.appendChild(node.cloneNode(true));\n  });\n  container.appendChild(contentContainer);\n  container.appendChild(fixedContainer); // Render in the fake container\n\n  ellipsisContainer.appendChild(container); // Check if ellipsis in measure div is height enough for content\n\n  function inRange() {\n    return ellipsisContainer.offsetHeight < maxHeight;\n  }\n\n  if (inRange()) {\n    var text = ellipsisContainer.innerHTML;\n    ellipsisContainer.removeChild(container);\n    return {\n      contentNodes: contentNodes,\n      text: text,\n      ellipsis: false\n    };\n  } // We should clone the childNode since they're controlled by React and we can't reuse it without warning\n\n\n  var childNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes).filter(function (_ref) {\n    var nodeType = _ref.nodeType;\n    return nodeType !== COMMENT_NODE;\n  });\n  var fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\n  ellipsisContainer.removeChild(container); // ========================= Find match ellipsis content =========================\n\n  ellipsisContainer.innerHTML = ''; // Create origin content holder\n\n  var ellipsisContentHolder = document.createElement('span');\n  ellipsisContainer.appendChild(ellipsisContentHolder);\n  var ellipsisTextNode = document.createTextNode(ellipsisStr + suffixStr);\n  ellipsisContentHolder.appendChild(ellipsisTextNode);\n  fixedNodes.forEach(function (childNode) {\n    ellipsisContainer.appendChild(childNode);\n  }); // Append before fixed nodes\n\n  function appendChildNode(node) {\n    ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\n  } // Get maximum text\n\n\n  function measureText(textNode, fullText) {\n    var startLoc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 0;\n    var endLoc = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : fullText.length;\n    var lastSuccessLoc = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0;\n    var midLoc = Math.floor((startLoc + endLoc) / 2);\n    textNode.textContent = fullText.slice(0, midLoc);\n\n    if (startLoc >= endLoc - 1) {\n      // Loop when step is small\n      for (var step = endLoc; step >= startLoc; step -= 1) {\n        var currentStepText = fullText.slice(0, step);\n        textNode.textContent = currentStepText;\n\n        if (inRange() || !currentStepText) {\n          return step === fullText.length ? {\n            finished: false,\n            node: document.createTextNode(fullText)\n          } : {\n            finished: true,\n            node: document.createTextNode(currentStepText)\n          };\n        }\n      }\n    }\n\n    if (inRange()) {\n      return measureText(textNode, fullText, midLoc, endLoc, midLoc);\n    } else {\n      return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\n    }\n  }\n\n  function measureNode(childNode, index) {\n    var type = childNode.nodeType;\n\n    if (type === ELEMENT_NODE) {\n      // We don't split element, it will keep if whole element can be displayed.\n      // appendChildNode(childNode);\n      if (inRange()) {\n        return {\n          finished: false,\n          node: contentList[index]\n        };\n      } // Clean up if can not pull in\n\n\n      ellipsisContentHolder.removeChild(childNode);\n      return {\n        finished: true,\n        node: null\n      };\n    } else if (type === TEXT_NODE) {\n      var fullText = childNode.textContent || '';\n      var textNode = document.createTextNode(fullText);\n      appendChildNode(textNode);\n      return measureText(textNode, fullText);\n    } // Not handle other type of content\n    // PS: This code should not be attached after react 16\n\n\n    return {\n      finished: false,\n      node: null\n    };\n  }\n\n  var ellipsisNodes = [];\n  childNodes.some(function (childNode, index) {\n    var _measureNode = measureNode(childNode, index),\n        finished = _measureNode.finished,\n        node = _measureNode.node;\n\n    if (node) {\n      ellipsisNodes.push(node);\n    }\n\n    return finished;\n  });\n  var result = {\n    contentNodes: ellipsisNodes,\n    text: ellipsisContainer.innerHTML,\n    ellipsis: true\n  };\n\n  while (ellipsisContainer.firstChild) {\n    ellipsisContainer.removeChild(ellipsisContainer.firstChild);\n  }\n\n  return result;\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nvar scrollbarVerticalSize;\nvar scrollbarHorizontalSize; // Measure scrollbar width for padding body during modal show/hide\n\nvar scrollbarMeasure = {\n  position: 'absolute',\n  top: '-9999px',\n  width: '50px',\n  height: '50px'\n};\n\nfunction measureScrollbar() {\n  var direction = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'vertical';\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'ant';\n\n  if (typeof document === 'undefined' || typeof window === 'undefined') {\n    return 0;\n  }\n\n  var isVertical = direction === 'vertical';\n\n  if (isVertical && scrollbarVerticalSize) {\n    return scrollbarVerticalSize;\n  } else if (!isVertical && scrollbarHorizontalSize) {\n    return scrollbarHorizontalSize;\n  }\n\n  var scrollDiv = document.createElement('div');\n  Object.keys(scrollbarMeasure).forEach(function (scrollProp) {\n    // @ts-ignore\n    scrollDiv.style[scrollProp] = scrollbarMeasure[scrollProp];\n  }); // apply hide scrollbar className ahead\n\n  scrollDiv.className = \"\".concat(prefix, \"-hide-scrollbar scroll-div-append-to-body\"); // Append related overflow style\n\n  if (isVertical) {\n    scrollDiv.style.overflowY = 'scroll';\n  } else {\n    scrollDiv.style.overflowX = 'scroll';\n  }\n\n  document.body.appendChild(scrollDiv);\n  var size = 0;\n\n  if (isVertical) {\n    size = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    scrollbarVerticalSize = size;\n  } else {\n    size = scrollDiv.offsetHeight - scrollDiv.clientHeight;\n    scrollbarHorizontalSize = size;\n  }\n\n  document.body.removeChild(scrollDiv);\n  return size;\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction ensureInBounds(value, boundValue) {\n  return value ? value < boundValue ? value : boundValue : boundValue;\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction inNextTick() {\n  var timer = new Subject();\n  Promise.resolve().then(function () {\n    return timer.next();\n  });\n  return timer.pipe(take(1));\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n\nfunction wrapIntoObservable(value) {\n  if (isObservable(value)) {\n    return value;\n  }\n\n  if (isPromise(value)) {\n    // Use `Promise.resolve()` to wrap promise-like instances.\n    return from(Promise.resolve(value));\n  }\n\n  return of(value);\n}\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { InputBoolean, InputCssPixel, InputNumber, arraysEqual, createDebugEle, ensureInBounds, ensureNumberInRange, getCaretCoordinates, getElementOffset, getEventPosition, getMentions, getPercent, getPrecision, getRegExp, getRepeatedElement, getStyleAsText, inNextTick, isNil, isNonEmptyString, isNotNil, isNumberFinite, isPromise, isStyleSupport, isTemplateRef, isTouchEvent, measure, measureScrollbar, padEnd, padStart, properties, pxToNumber, scrollIntoView, shallowCopyArray, shallowEqual, silentEvent, sum, toArray, toBoolean, toCssPixel, toDecimal, toNumber, valueFunctionProp, wrapIntoObservable, ɵ0 }; //# sourceMappingURL=ng-zorro-antd-core-util.js.map","map":{"version":3,"sources":["/Users/mac/WebstormProjects/github-page/node_modules/ng-zorro-antd/__ivy_ngcc__/fesm2015/ng-zorro-antd-core-util.js"],"names":["TemplateRef","coerceBooleanProperty","_isNumberValue","coerceCssPixelValue","warn","Subject","isObservable","from","of","take","toArray","value","ret","Array","isArray","arraysEqual","array1","array2","length","len","i","shallowCopyArray","source","slice","isNotNil","isNil","shallowEqual","objA","objB","keysA","Object","keys","keysB","bHasOwnProperty","prototype","hasOwnProperty","bind","idx","key","isNonEmptyString","isTemplateRef","toBoolean","toNumber","fallbackValue","Number","toCssPixel","valueFunctionProp","prop","args","propDecoratorFactory","name","fallback","propDecorator","target","propName","originalDescriptor","privatePropName","call","defineProperty","configurable","writable","get","set","InputBoolean","InputCssPixel","InputNumber","silentEvent","e","stopPropagation","preventDefault","getElementOffset","elem","getClientRects","top","left","rect","getBoundingClientRect","win","ownerDocument","defaultView","pageYOffset","pageXOffset","isTouchEvent","event","type","startsWith","getEventPosition","touches","changedTouches","getRegExp","prefix","prefixArray","prefixToken","join","replace","RegExp","getMentions","regex","mentions","match","map","trim","padStart","toPad","element","joined","getRepeatedElement","padEnd","fill","isPromise","obj","then","catch","getPercent","min","max","getPrecision","num","numStr","toString","dotIndex","indexOf","ensureNumberInRange","isNaN","isNumberFinite","isFinite","toDecimal","decimal","Math","round","pow","sum","input","initial","reduce","previous","current","scrollIntoView","node","nodeAsAny","scrollIntoViewIfNeeded","properties","isBrowser","window","isFirefox","mozInnerScreenX","_parseInt","str","parseInt","ɵ0","getCaretCoordinates","position","options","Error","debug","el","document","querySelector","parentNode","removeChild","div","createElement","id","body","appendChild","style","computed","getComputedStyle","currentStyle","isInput","nodeName","whiteSpace","wordWrap","visibility","forEach","lineHeight","height","scrollHeight","overflowY","overflow","textContent","substring","span","coordinates","offsetTop","borderTopWidth","offsetLeft","borderLeftWidth","backgroundColor","createDebugEle","fontSize","getPropertyValue","width","scrollTop","scrollLeft","isStyleSupport","styleName","documentElement","styleNameList","some","getStyleAsText","styles","val","ELEMENT_NODE","TEXT_NODE","COMMENT_NODE","ellipsisContainer","wrapperStyle","padding","margin","display","pxToNumber","styleToString","styleNames","apply","mergeChildren","children","childList","child","prevChild","nodeType","data","push","measure","originEle","rows","contentNodes","fixedContent","ellipsisStr","suffixStr","setAttribute","originStyle","originCSS","maxHeight","paddingTop","paddingBottom","minHeight","zIndex","textOverflow","webkitLineClamp","contentList","container","contentContainer","suffixContainer","createTextNode","fixedContainer","assign","n","cloneNode","inRange","offsetHeight","text","innerHTML","ellipsis","childNodes","filter","fixedNodes","ellipsisContentHolder","ellipsisTextNode","childNode","appendChildNode","insertBefore","measureText","textNode","fullText","startLoc","endLoc","lastSuccessLoc","midLoc","floor","step","currentStepText","finished","measureNode","index","ellipsisNodes","result","firstChild","scrollbarVerticalSize","scrollbarHorizontalSize","scrollbarMeasure","measureScrollbar","direction","isVertical","scrollDiv","scrollProp","className","overflowX","size","offsetWidth","clientWidth","clientHeight","ensureInBounds","boundValue","inNextTick","timer","Promise","resolve","next","pipe","wrapIntoObservable"],"mappings":"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","sourcesContent":["import { TemplateRef } from '@angular/core';\nimport { coerceBooleanProperty, _isNumberValue, coerceCssPixelValue } from '@angular/cdk/coercion';\nimport { warn } from 'ng-zorro-antd/core/logger';\nimport { Subject, isObservable, from, of } from 'rxjs';\nimport { take } from 'rxjs/operators';\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction toArray(value) {\n    let ret;\n    if (value == null) {\n        ret = [];\n    }\n    else if (!Array.isArray(value)) {\n        ret = [value];\n    }\n    else {\n        ret = value;\n    }\n    return ret;\n}\nfunction arraysEqual(array1, array2) {\n    if (!array1 || !array2 || array1.length !== array2.length) {\n        return false;\n    }\n    const len = array1.length;\n    for (let i = 0; i < len; i++) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction shallowCopyArray(source) {\n    return source.slice();\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction isNotNil(value) {\n    return typeof value !== 'undefined' && value !== null;\n}\nfunction isNil(value) {\n    return typeof value === 'undefined' || value === null;\n}\n/**\n * Examine if two objects are shallowly equaled.\n */\nfunction shallowEqual(objA, objB) {\n    if (objA === objB) {\n        return true;\n    }\n    if (typeof objA !== 'object' || !objA || typeof objB !== 'object' || !objB) {\n        return false;\n    }\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n    if (keysA.length !== keysB.length) {\n        return false;\n    }\n    const bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n    // tslint:disable-next-line:prefer-for-of\n    for (let idx = 0; idx < keysA.length; idx++) {\n        const key = keysA[idx];\n        if (!bHasOwnProperty(key)) {\n            return false;\n        }\n        if (objA[key] !== objB[key]) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction isNonEmptyString(value) {\n    return typeof value === 'string' && value !== '';\n}\nfunction isTemplateRef(value) {\n    return value instanceof TemplateRef;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction toBoolean(value) {\n    return coerceBooleanProperty(value);\n}\nfunction toNumber(value, fallbackValue = 0) {\n    return _isNumberValue(value) ? Number(value) : fallbackValue;\n}\nfunction toCssPixel(value) {\n    return coerceCssPixelValue(value);\n}\n// tslint:disable no-invalid-this\n/**\n * Get the function-property type's value\n */\nfunction valueFunctionProp(prop, ...args) {\n    return typeof prop === 'function' ? prop(...args) : prop;\n}\nfunction propDecoratorFactory(name, fallback) {\n    function propDecorator(target, propName, originalDescriptor) {\n        const privatePropName = `$$__${propName}`;\n        if (Object.prototype.hasOwnProperty.call(target, privatePropName)) {\n            warn(`The prop \"${privatePropName}\" is already exist, it will be overrided by ${name} decorator.`);\n        }\n        Object.defineProperty(target, privatePropName, {\n            configurable: true,\n            writable: true\n        });\n        return {\n            get() {\n                return originalDescriptor && originalDescriptor.get ? originalDescriptor.get.bind(this)() : this[privatePropName];\n            },\n            set(value) {\n                if (originalDescriptor && originalDescriptor.set) {\n                    originalDescriptor.set.bind(this)(fallback(value));\n                }\n                this[privatePropName] = fallback(value);\n            }\n        };\n    }\n    return propDecorator;\n}\n/**\n * Input decorator that handle a prop to do get/set automatically with toBoolean\n *\n * Why not using @InputBoolean alone without @Input? AOT needs @Input to be visible\n *\n * @howToUse\n * ```\n * @Input() @InputBoolean() visible: boolean = false;\n *\n * // Act as below:\n * // @Input()\n * // get visible() { return this.__visible; }\n * // set visible(value) { this.__visible = value; }\n * // __visible = false;\n * ```\n */\nfunction InputBoolean() {\n    return propDecoratorFactory('InputBoolean', toBoolean);\n}\nfunction InputCssPixel() {\n    return propDecoratorFactory('InputCssPixel', toCssPixel);\n}\nfunction InputNumber(fallbackValue) {\n    return propDecoratorFactory('InputNumber', (value) => toNumber(value, fallbackValue));\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n/**\n * Silent an event by stopping and preventing it.\n */\nfunction silentEvent(e) {\n    e.stopPropagation();\n    e.preventDefault();\n}\nfunction getElementOffset(elem) {\n    if (!elem.getClientRects().length) {\n        return { top: 0, left: 0 };\n    }\n    const rect = elem.getBoundingClientRect();\n    const win = elem.ownerDocument.defaultView;\n    return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset\n    };\n}\n/**\n * Investigate if an event is a `TouchEvent`.\n */\nfunction isTouchEvent(event) {\n    return event.type.startsWith('touch');\n}\nfunction getEventPosition(event) {\n    return isTouchEvent(event) ? event.touches[0] || event.changedTouches[0] : event;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction getRegExp(prefix) {\n    const prefixArray = Array.isArray(prefix) ? prefix : [prefix];\n    let prefixToken = prefixArray.join('').replace(/(\\$|\\^)/g, '\\\\$1');\n    if (prefixArray.length > 1) {\n        prefixToken = `[${prefixToken}]`;\n    }\n    return new RegExp(`(\\\\s|^)(${prefixToken})[^\\\\s]*`, 'g');\n}\nfunction getMentions(value, prefix = '@') {\n    if (typeof value !== 'string') {\n        return [];\n    }\n    const regex = getRegExp(prefix);\n    const mentions = value.match(regex);\n    return mentions !== null ? mentions.map(e => e.trim()) : [];\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n/**\n * Much like lodash.\n */\nfunction padStart(toPad, length, element) {\n    if (toPad.length > length) {\n        return toPad;\n    }\n    const joined = `${getRepeatedElement(length, element)}${toPad}`;\n    return joined.slice(joined.length - length, joined.length);\n}\nfunction padEnd(toPad, length, element) {\n    const joined = `${toPad}${getRepeatedElement(length, element)}`;\n    return joined.slice(0, length);\n}\nfunction getRepeatedElement(length, element) {\n    return Array(length).fill(element).join('');\n}\n\nfunction isPromise(obj) {\n    return !!obj && typeof obj.then === 'function' && typeof obj.catch === 'function';\n}\n\nfunction getPercent(min, max, value) {\n    return ((value - min) / (max - min)) * 100;\n}\nfunction getPrecision(num) {\n    const numStr = num.toString();\n    const dotIndex = numStr.indexOf('.');\n    return dotIndex >= 0 ? numStr.length - dotIndex - 1 : 0;\n}\nfunction ensureNumberInRange(num, min, max) {\n    if (isNaN(num) || num < min) {\n        return min;\n    }\n    else if (num > max) {\n        return max;\n    }\n    else {\n        return num;\n    }\n}\nfunction isNumberFinite(value) {\n    return typeof value === 'number' && isFinite(value);\n}\nfunction toDecimal(value, decimal) {\n    return Math.round(value * Math.pow(10, decimal)) / Math.pow(10, decimal);\n}\nfunction sum(input, initial = 0) {\n    return input.reduce((previous, current) => previous + current, initial);\n}\n\nfunction scrollIntoView(node) {\n    const nodeAsAny = node;\n    if (nodeAsAny.scrollIntoViewIfNeeded) {\n        /* tslint:disable-next-line:no-string-literal */\n        nodeAsAny.scrollIntoViewIfNeeded(false);\n        return;\n    }\n    if (node.scrollIntoView) {\n        node.scrollIntoView(false);\n        return;\n    }\n}\n\n// from https://github.com/component/textarea-caret-position\n// We'll copy the properties below into the mirror div.\n// Note that some browsers, such as Firefox, do not concatenate properties\n// into their shorthand (e.g. padding-top, padding-bottom etc. -> padding),\n// so we have to list every single property explicitly.\nconst properties = [\n    'direction',\n    'boxSizing',\n    'width',\n    'height',\n    'overflowX',\n    'overflowY',\n    'borderTopWidth',\n    'borderRightWidth',\n    'borderBottomWidth',\n    'borderLeftWidth',\n    'borderStyle',\n    'paddingTop',\n    'paddingRight',\n    'paddingBottom',\n    'paddingLeft',\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font\n    'fontStyle',\n    'fontVariant',\n    'fontWeight',\n    'fontStretch',\n    'fontSize',\n    'fontSizeAdjust',\n    'lineHeight',\n    'fontFamily',\n    'textAlign',\n    'textTransform',\n    'textIndent',\n    'textDecoration',\n    'letterSpacing',\n    'wordSpacing',\n    'tabSize',\n    'MozTabSize'\n];\nconst isBrowser = typeof window !== 'undefined';\nconst isFirefox = isBrowser && window.mozInnerScreenX != null;\nconst _parseInt = (str) => parseInt(str, 10);\nconst ɵ0 = _parseInt;\nfunction getCaretCoordinates(element, position, options) {\n    if (!isBrowser) {\n        throw new Error('textarea-caret-position#getCaretCoordinates should only be called in a browser');\n    }\n    const debug = (options && options.debug) || false;\n    if (debug) {\n        const el = document.querySelector('#input-textarea-caret-position-mirror-div');\n        if (el) {\n            el.parentNode.removeChild(el);\n        }\n    }\n    // The mirror div will replicate the textarea's style\n    const div = document.createElement('div');\n    div.id = 'input-textarea-caret-position-mirror-div';\n    document.body.appendChild(div);\n    const style = div.style;\n    const computed = window.getComputedStyle ? window.getComputedStyle(element) : element.currentStyle; // currentStyle for IE < 9\n    const isInput = element.nodeName === 'INPUT';\n    // Default textarea styles\n    style.whiteSpace = 'pre-wrap';\n    if (!isInput) {\n        style.wordWrap = 'break-word'; // only for textarea-s\n    }\n    // Position off-screen\n    style.position = 'absolute'; // required to return coordinates properly\n    if (!debug) {\n        style.visibility = 'hidden';\n    } // not 'display: none' because we want rendering\n    // Transfer the element's properties to the div\n    properties.forEach((prop) => {\n        if (isInput && prop === 'lineHeight') {\n            // Special case for <input>s because text is rendered centered and line height may be != height\n            style.lineHeight = computed.height;\n        }\n        else {\n            // @ts-ignore\n            style[prop] = computed[prop];\n        }\n    });\n    if (isFirefox) {\n        // Firefox lies about the overflow property for textareas: https://bugzilla.mozilla.org/show_bug.cgi?id=984275\n        if (element.scrollHeight > _parseInt(computed.height)) {\n            style.overflowY = 'scroll';\n        }\n    }\n    else {\n        style.overflow = 'hidden'; // for Chrome to not render a scrollbar; IE keeps overflowY = 'scroll'\n    }\n    div.textContent = element.value.substring(0, position);\n    // The second special handling for input type=\"text\" vs textarea:\n    // spaces need to be replaced with non-breaking spaces - http://stackoverflow.com/a/13402035/1269037\n    if (isInput) {\n        div.textContent = div.textContent.replace(/\\s/g, '\\u00a0');\n    }\n    const span = document.createElement('span');\n    // Wrapping must be replicated *exactly*, including when a long word gets\n    // onto the next line, with whitespace at the end of the line before (#7).\n    // The  *only* reliable way to do that is to copy the *entire* rest of the\n    // textarea's content into the <span> created at the caret position.\n    // For inputs, just '.' would be enough, but no need to bother.\n    span.textContent = element.value.substring(position) || '.'; // || because a completely empty faux span doesn't render at all\n    div.appendChild(span);\n    const coordinates = {\n        top: span.offsetTop + _parseInt(computed.borderTopWidth),\n        left: span.offsetLeft + _parseInt(computed.borderLeftWidth),\n        height: _parseInt(computed.lineHeight)\n    };\n    if (debug) {\n        span.style.backgroundColor = '#eee';\n        createDebugEle(element, coordinates);\n    }\n    else {\n        document.body.removeChild(div);\n    }\n    return coordinates;\n}\nfunction createDebugEle(element, coordinates) {\n    const fontSize = getComputedStyle(element).getPropertyValue('font-size');\n    const rect = document.querySelector('#DEBUG') || document.createElement('div');\n    document.body.appendChild(rect);\n    rect.id = 'DEBUG';\n    rect.style.position = 'absolute';\n    rect.style.backgroundColor = 'red';\n    rect.style.height = fontSize;\n    rect.style.width = '1px';\n    rect.style.top = `${element.getBoundingClientRect().top - element.scrollTop + window.pageYOffset + coordinates.top}px`;\n    rect.style.left = `${element.getBoundingClientRect().left - element.scrollLeft + window.pageXOffset + coordinates.left}px`;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction isStyleSupport(styleName) {\n    if (typeof window !== 'undefined' && window.document && window.document.documentElement) {\n        const styleNameList = Array.isArray(styleName) ? styleName : [styleName];\n        const { documentElement } = window.document;\n        return styleNameList.some(name => name in documentElement.style);\n    }\n    return false;\n}\nfunction getStyleAsText(styles) {\n    if (!styles) {\n        return '';\n    }\n    return Object.keys(styles)\n        .map(key => {\n        const val = styles[key];\n        return `${key}:${typeof val === 'string' ? val : val + 'px'}`;\n    })\n        .join(';');\n}\n\n// We only handle element & text node.\nconst ELEMENT_NODE = 1;\nconst TEXT_NODE = 3;\nconst COMMENT_NODE = 8;\nlet ellipsisContainer;\nconst wrapperStyle = {\n    padding: '0',\n    margin: '0',\n    display: 'inline',\n    lineHeight: 'inherit'\n};\nfunction pxToNumber(value) {\n    if (!value) {\n        return 0;\n    }\n    const match = value.match(/^\\d*(\\.\\d*)?/);\n    return match ? Number(match[0]) : 0;\n}\nfunction styleToString(style) {\n    // There are some different behavior between Firefox & Chrome.\n    // We have to handle this ourself.\n    const styleNames = Array.prototype.slice.apply(style);\n    return styleNames.map(name => `${name}: ${style.getPropertyValue(name)};`).join('');\n}\nfunction mergeChildren(children) {\n    const childList = [];\n    children.forEach((child) => {\n        const prevChild = childList[childList.length - 1];\n        if (prevChild && child.nodeType === TEXT_NODE && prevChild.nodeType === TEXT_NODE) {\n            prevChild.data += child.data;\n        }\n        else {\n            childList.push(child);\n        }\n    });\n    return childList;\n}\nfunction measure(originEle, rows, contentNodes, fixedContent, ellipsisStr, suffixStr = '') {\n    if (!ellipsisContainer) {\n        ellipsisContainer = document.createElement('div');\n        ellipsisContainer.setAttribute('aria-hidden', 'true');\n        document.body.appendChild(ellipsisContainer);\n    }\n    // Get origin style\n    const originStyle = window.getComputedStyle(originEle);\n    const originCSS = styleToString(originStyle);\n    const lineHeight = pxToNumber(originStyle.lineHeight);\n    const maxHeight = Math.round(lineHeight * (rows + 1) + pxToNumber(originStyle.paddingTop) + pxToNumber(originStyle.paddingBottom));\n    // Set shadow\n    ellipsisContainer.setAttribute('style', originCSS);\n    ellipsisContainer.style.position = 'fixed';\n    ellipsisContainer.style.left = '0';\n    ellipsisContainer.style.height = 'auto';\n    ellipsisContainer.style.minHeight = 'auto';\n    ellipsisContainer.style.maxHeight = 'auto';\n    ellipsisContainer.style.top = '-999999px';\n    ellipsisContainer.style.zIndex = '-1000';\n    // clean up css overflow\n    ellipsisContainer.style.textOverflow = 'clip';\n    ellipsisContainer.style.whiteSpace = 'normal';\n    ellipsisContainer.style.webkitLineClamp = 'none';\n    const contentList = mergeChildren(contentNodes);\n    const container = document.createElement('div');\n    const contentContainer = document.createElement('span');\n    const suffixContainer = document.createTextNode(suffixStr);\n    const fixedContainer = document.createElement('span');\n    // Add styles in container\n    Object.assign(container.style, wrapperStyle);\n    Object.assign(contentContainer.style, wrapperStyle);\n    Object.assign(fixedContainer.style, wrapperStyle);\n    contentList.forEach(n => {\n        contentContainer.appendChild(n);\n    });\n    contentContainer.appendChild(suffixContainer);\n    fixedContent.forEach(node => {\n        fixedContainer.appendChild(node.cloneNode(true));\n    });\n    container.appendChild(contentContainer);\n    container.appendChild(fixedContainer);\n    // Render in the fake container\n    ellipsisContainer.appendChild(container);\n    // Check if ellipsis in measure div is height enough for content\n    function inRange() {\n        return ellipsisContainer.offsetHeight < maxHeight;\n    }\n    if (inRange()) {\n        const text = ellipsisContainer.innerHTML;\n        ellipsisContainer.removeChild(container);\n        return { contentNodes, text, ellipsis: false };\n    }\n    // We should clone the childNode since they're controlled by React and we can't reuse it without warning\n    const childNodes = Array.prototype.slice\n        .apply(ellipsisContainer.childNodes[0].childNodes[0].cloneNode(true).childNodes)\n        .filter(({ nodeType }) => nodeType !== COMMENT_NODE);\n    const fixedNodes = Array.prototype.slice.apply(ellipsisContainer.childNodes[0].childNodes[1].cloneNode(true).childNodes);\n    ellipsisContainer.removeChild(container);\n    // ========================= Find match ellipsis content =========================\n    ellipsisContainer.innerHTML = '';\n    // Create origin content holder\n    const ellipsisContentHolder = document.createElement('span');\n    ellipsisContainer.appendChild(ellipsisContentHolder);\n    const ellipsisTextNode = document.createTextNode(ellipsisStr + suffixStr);\n    ellipsisContentHolder.appendChild(ellipsisTextNode);\n    fixedNodes.forEach(childNode => {\n        ellipsisContainer.appendChild(childNode);\n    });\n    // Append before fixed nodes\n    function appendChildNode(node) {\n        ellipsisContentHolder.insertBefore(node, ellipsisTextNode);\n    }\n    // Get maximum text\n    function measureText(textNode, fullText, startLoc = 0, endLoc = fullText.length, lastSuccessLoc = 0) {\n        const midLoc = Math.floor((startLoc + endLoc) / 2);\n        textNode.textContent = fullText.slice(0, midLoc);\n        if (startLoc >= endLoc - 1) {\n            // Loop when step is small\n            for (let step = endLoc; step >= startLoc; step -= 1) {\n                const currentStepText = fullText.slice(0, step);\n                textNode.textContent = currentStepText;\n                if (inRange() || !currentStepText) {\n                    return step === fullText.length\n                        ? {\n                            finished: false,\n                            node: document.createTextNode(fullText)\n                        }\n                        : {\n                            finished: true,\n                            node: document.createTextNode(currentStepText)\n                        };\n                }\n            }\n        }\n        if (inRange()) {\n            return measureText(textNode, fullText, midLoc, endLoc, midLoc);\n        }\n        else {\n            return measureText(textNode, fullText, startLoc, midLoc, lastSuccessLoc);\n        }\n    }\n    function measureNode(childNode, index) {\n        const type = childNode.nodeType;\n        if (type === ELEMENT_NODE) {\n            // We don't split element, it will keep if whole element can be displayed.\n            // appendChildNode(childNode);\n            if (inRange()) {\n                return {\n                    finished: false,\n                    node: contentList[index]\n                };\n            }\n            // Clean up if can not pull in\n            ellipsisContentHolder.removeChild(childNode);\n            return {\n                finished: true,\n                node: null\n            };\n        }\n        else if (type === TEXT_NODE) {\n            const fullText = childNode.textContent || '';\n            const textNode = document.createTextNode(fullText);\n            appendChildNode(textNode);\n            return measureText(textNode, fullText);\n        }\n        // Not handle other type of content\n        // PS: This code should not be attached after react 16\n        return {\n            finished: false,\n            node: null\n        };\n    }\n    const ellipsisNodes = [];\n    childNodes.some((childNode, index) => {\n        const { finished, node } = measureNode(childNode, index);\n        if (node) {\n            ellipsisNodes.push(node);\n        }\n        return finished;\n    });\n    const result = {\n        contentNodes: ellipsisNodes,\n        text: ellipsisContainer.innerHTML,\n        ellipsis: true\n    };\n    while (ellipsisContainer.firstChild) {\n        ellipsisContainer.removeChild(ellipsisContainer.firstChild);\n    }\n    return result;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nlet scrollbarVerticalSize;\nlet scrollbarHorizontalSize;\n// Measure scrollbar width for padding body during modal show/hide\nconst scrollbarMeasure = {\n    position: 'absolute',\n    top: '-9999px',\n    width: '50px',\n    height: '50px'\n};\nfunction measureScrollbar(direction = 'vertical', prefix = 'ant') {\n    if (typeof document === 'undefined' || typeof window === 'undefined') {\n        return 0;\n    }\n    const isVertical = direction === 'vertical';\n    if (isVertical && scrollbarVerticalSize) {\n        return scrollbarVerticalSize;\n    }\n    else if (!isVertical && scrollbarHorizontalSize) {\n        return scrollbarHorizontalSize;\n    }\n    const scrollDiv = document.createElement('div');\n    Object.keys(scrollbarMeasure).forEach(scrollProp => {\n        // @ts-ignore\n        scrollDiv.style[scrollProp] = scrollbarMeasure[scrollProp];\n    });\n    // apply hide scrollbar className ahead\n    scrollDiv.className = `${prefix}-hide-scrollbar scroll-div-append-to-body`;\n    // Append related overflow style\n    if (isVertical) {\n        scrollDiv.style.overflowY = 'scroll';\n    }\n    else {\n        scrollDiv.style.overflowX = 'scroll';\n    }\n    document.body.appendChild(scrollDiv);\n    let size = 0;\n    if (isVertical) {\n        size = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n        scrollbarVerticalSize = size;\n    }\n    else {\n        size = scrollDiv.offsetHeight - scrollDiv.clientHeight;\n        scrollbarHorizontalSize = size;\n    }\n    document.body.removeChild(scrollDiv);\n    return size;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction ensureInBounds(value, boundValue) {\n    return value ? (value < boundValue ? value : boundValue) : boundValue;\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction inNextTick() {\n    const timer = new Subject();\n    Promise.resolve().then(() => timer.next());\n    return timer.pipe(take(1));\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\nfunction wrapIntoObservable(value) {\n    if (isObservable(value)) {\n        return value;\n    }\n    if (isPromise(value)) {\n        // Use `Promise.resolve()` to wrap promise-like instances.\n        return from(Promise.resolve(value));\n    }\n    return of(value);\n}\n\n/**\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://github.com/NG-ZORRO/ng-zorro-antd/blob/master/LICENSE\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { InputBoolean, InputCssPixel, InputNumber, arraysEqual, createDebugEle, ensureInBounds, ensureNumberInRange, getCaretCoordinates, getElementOffset, getEventPosition, getMentions, getPercent, getPrecision, getRegExp, getRepeatedElement, getStyleAsText, inNextTick, isNil, isNonEmptyString, isNotNil, isNumberFinite, isPromise, isStyleSupport, isTemplateRef, isTouchEvent, measure, measureScrollbar, padEnd, padStart, properties, pxToNumber, scrollIntoView, shallowCopyArray, shallowEqual, silentEvent, sum, toArray, toBoolean, toCssPixel, toDecimal, toNumber, valueFunctionProp, wrapIntoObservable, ɵ0 };\n\n//# sourceMappingURL=ng-zorro-antd-core-util.js.map"]},"metadata":{},"sourceType":"module"}